Traceback (most recent call last):
  File "C:\Users\hatef\anaconda3\envs\jbook\lib\site-packages\jupyter_cache\executors\utils.py", line 58, in single_nb_execution
    executenb(
  File "C:\Users\hatef\anaconda3\envs\jbook\lib\site-packages\nbclient\client.py", line 1204, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
  File "C:\Users\hatef\anaconda3\envs\jbook\lib\site-packages\nbclient\util.py", line 84, in wrapped
    return just_run(coro(*args, **kwargs))
  File "C:\Users\hatef\anaconda3\envs\jbook\lib\site-packages\nbclient\util.py", line 62, in just_run
    return loop.run_until_complete(coro)
  File "C:\Users\hatef\anaconda3\envs\jbook\lib\asyncio\base_events.py", line 616, in run_until_complete
    return future.result()
  File "C:\Users\hatef\anaconda3\envs\jbook\lib\site-packages\nbclient\client.py", line 663, in async_execute
    await self.async_execute_cell(
  File "C:\Users\hatef\anaconda3\envs\jbook\lib\site-packages\nbclient\client.py", line 965, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "C:\Users\hatef\anaconda3\envs\jbook\lib\site-packages\nbclient\client.py", line 862, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
import matplotlib.pyplot as plt
from sklearn.linear_model import LinearRegression
import calendar

def _regplot(ax, df_sub, X, reg, *args, **kwargs):
    '''
    Plots the regression line on the given axis.

    Parameters:
    - ax: matplotlib axis
        The axis to plot on.
    - df_sub: pandas DataFrame
        Subset of data for a specific month.
    - X: numpy array
        Independent variable (index values).
    - reg: regression model
        The regression model used for prediction.
    - *args, **kwargs: additional plot arguments
        Additional arguments for the plot function.
    '''
    y_hat = reg.predict(X)
    ax.plot(df_sub.Date, y_hat, *args, **kwargs)
    ax.set_title(f'Slope = {reg.coef_.ravel()[0]:.3}', fontsize=14)

fig, axes = plt.subplots(12, 1, figsize=(9.5, 20), sharex=True)
for m, ax in enumerate(axes, start=1):
    # Create and fit the Linear Regression model
    reg = LinearRegression()
    # Subset data for a specific month
    df_sub = df.loc[df.Month == m].reset_index(drop=True)
    
    # Scatter plot for Mean Max Temp
    ax.scatter(df_sub['Date'], df_sub['Mean Temp (Â°C)'],
               fc='Blue', ec='k', s=15, label = 'Mean Temp (Â°C)')
    
    # Set axis label as the month name
    ax.set_ylabel(calendar.month_name[m], weight='bold')
    ax.grid(True)
    
    # Remove rows with missing values
    df_sub = df_sub.dropna() 
    
    # Prepare data for linear regression
    X = df_sub.index.values.reshape(-1, 1)
    y = df_sub['Mean Temp (Â°C)'].values.reshape(-1, 1)
    
    # Create and fit a Linear Regression model
    reg = LinearRegression()
    _ = reg.fit(X, y)
    
    # Plot the fitted line
    _regplot(ax=ax, df_sub=df_sub, X=X, reg=reg,
             linestyle='dashed', color='red', lw=1.5, label='Fitted Line')
    ax.legend()
    
fig.suptitle("""Monthly Mean Temperature (Â°C) Trends at CALGARY INT'L A: Linear Analysis""", y = 0.99,
            weight = 'bold', fontsize = 16)
plt.tight_layout()

df_results = pd.DataFrame({'Slope':slope_list}, index = month_list)
------------------

[1;31m---------------------------------------------------------------------------[0m
[1;31mNameError[0m                                 Traceback (most recent call last)
Cell [1;32mIn[13], line 60[0m
[0;32m     56[0m fig[38;5;241m.[39msuptitle([38;5;124m"""[39m[38;5;124mMonthly Mean Temperature (Â°C) Trends at CALGARY INT[39m[38;5;124m'[39m[38;5;124mL A: Linear Analysis[39m[38;5;124m"""[39m, y [38;5;241m=[39m [38;5;241m0.99[39m,
[0;32m     57[0m             weight [38;5;241m=[39m [38;5;124m'[39m[38;5;124mbold[39m[38;5;124m'[39m, fontsize [38;5;241m=[39m [38;5;241m16[39m)
[0;32m     58[0m plt[38;5;241m.[39mtight_layout()
[1;32m---> 60[0m df_results [38;5;241m=[39m pd[38;5;241m.[39mDataFrame({[38;5;124m'[39m[38;5;124mSlope[39m[38;5;124m'[39m:[43mslope_list[49m}, index [38;5;241m=[39m month_list)

[1;31mNameError[0m: name 'slope_list' is not defined
NameError: name 'slope_list' is not defined

