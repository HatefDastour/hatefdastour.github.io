

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2. Geometric Transformations &#8212; Computer Vision</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/myfile.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'CV_C2';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. Drawing Functions" href="CV_C3.html" />
    <link rel="prev" title="1. Getting Started with OpenCV" href="CV_C1.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="Getting_Started.html">
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="Getting_Started.html">
                    Getting Started with Python
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="CV_C1.html">1. Getting Started with OpenCV</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">2. Geometric Transformations</a></li>
<li class="toctree-l1"><a class="reference internal" href="CV_C3.html">3. Drawing Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="CV_C4.html">4. Image Thresholding</a></li>
<li class="toctree-l1"><a class="reference internal" href="CV_C5.html">5. Image Filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="CV_C6.html">6. Morphological Transformations</a></li>
<li class="toctree-l1"><a class="reference internal" href="References.html">7. References</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://hatefdastour.github.io/notes/Computer_Vision/issues/new?title=Issue%20on%20page%20%2FCV_C2.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button"
   title="Open an issue"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/CV_C2.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Geometric Transformations</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#affine-transformations">2.1. Affine Transformations</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-derive-an-affine-transformation">2.1.1. How to Derive an Affine Transformation?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getaffinetransform">2.1.2. getAffineTransform</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#image-wrap">2.1.3. Image Wrap</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#resize">2.2. Resize</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#resizing-images-with-opencv">2.3. Resizing Images with OpenCV</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#warp-perspective">2.4. Warp Perspective</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#perspective-transformation">2.4.1. Perspective Transformation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#parameters">2.4.2. Parameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#function-signature">2.4.3. Function Signature</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#usage-and-importance">2.4.4. Usage and Importance</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#camera-calibration">2.5. Camera Calibration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#correcting-lens-distortion-with-cv2-undistort">2.6. Correcting Lens Distortion with <code class="docutils literal notranslate"><span class="pre">cv2.undistort()</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">2.6.1. Function Signature</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#importance-in-computer-vision">2.6.2. Importance in Computer Vision</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <div class="tex2jax_ignore mathjax_ignore section" id="geometric-transformations">
<h1><span class="section-number">2. </span>Geometric Transformations<a class="headerlink" href="#geometric-transformations" title="Permalink to this headline">#</a></h1>
<div class="section" id="affine-transformations">
<h2><span class="section-number">2.1. </span>Affine Transformations<a class="headerlink" href="#affine-transformations" title="Permalink to this headline">#</a></h2>
<p>An affine transformation is a fundamental concept in image processing used to represent various geometric operations. It combines linear transformations (matrix multiplication) with translations (vector addition) to achieve versatile effects <span id="id1">[<a class="reference internal" href="References.html#id25" title="OpenCV Developers. Opencv documentation. https://docs.opencv.org/4.x/index.html, 2023. [Online; accessed 01-August-2023].">OpenCV Developers, 2023</a>]</span>:</p>
<ol class="arabic simple">
<li><p><strong>Rotations</strong>: Employing linear transformations to rotate the image.</p></li>
<li><p><strong>Translations</strong>: Achieved by adding a vector, effectively shifting the image.</p></li>
<li><p><strong>Scale Operations</strong>: Applying linear transformations to resize the image.</p></li>
</ol>
<p>At its core, an affine transformation describes the relationship between two images. This transformation is typically represented by a 2x3 matrix <span id="id2">[<a class="reference internal" href="References.html#id25" title="OpenCV Developers. Opencv documentation. https://docs.opencv.org/4.x/index.html, 2023. [Online; accessed 01-August-2023].">OpenCV Developers, 2023</a>]</span>:</p>
<div class="amsmath math notranslate nohighlight" id="equation-6c7f9ab3-9d1f-47d2-abc9-da059e6b50b6">
<span class="eqno">(2.1)<a class="headerlink" href="#equation-6c7f9ab3-9d1f-47d2-abc9-da059e6b50b6" title="Permalink to this equation">#</a></span>\[\begin{equation}
A = \begin{bmatrix} a_{00} &amp; a_{01} \\ a_{10} &amp; a_{11} \end{bmatrix}_{2 \times 2} \quad B = \begin{bmatrix} b_{00} \\ b_{10} \end{bmatrix}_{2 \times 1}
\end{equation}\]</div>
<p>We combine these matrices to form a 2x3 matrix:</p>
<div class="amsmath math notranslate nohighlight" id="equation-4fc422fe-ad86-4c92-93c5-e04dd7d4deb4">
<span class="eqno">(2.2)<a class="headerlink" href="#equation-4fc422fe-ad86-4c92-93c5-e04dd7d4deb4" title="Permalink to this equation">#</a></span>\[\begin{equation}
M = \begin{bmatrix} A &amp; B \end{bmatrix} = \begin{bmatrix} a_{00} &amp; a_{01} &amp; b_{00} \\ a_{10} &amp; a_{11} &amp; b_{10} \end{bmatrix}_{2 \times 3}
\end{equation}\]</div>
<p>To transform a 2D vector <span class="math notranslate nohighlight">\(X = \begin{bmatrix} x \\ y \end{bmatrix}\)</span> using A and B, we can use:</p>
<div class="amsmath math notranslate nohighlight" id="equation-f5bbee16-3696-44d0-8274-26e08064a14f">
<span class="eqno">(2.3)<a class="headerlink" href="#equation-f5bbee16-3696-44d0-8274-26e08064a14f" title="Permalink to this equation">#</a></span>\[\begin{equation}
T = A \cdot \begin{bmatrix} x \\ y \end{bmatrix} + B
\end{equation}\]</div>
<p>This results in:</p>
<div class="amsmath math notranslate nohighlight" id="equation-97d13aac-85cb-4d3a-8411-3c0fbe318a38">
<span class="eqno">(2.4)<a class="headerlink" href="#equation-97d13aac-85cb-4d3a-8411-3c0fbe318a38" title="Permalink to this equation">#</a></span>\[\begin{equation}
T = \begin{bmatrix} a_{00}x + a_{01}y + b_{00} \\ a_{10}x + a_{11}y + b_{10} \end{bmatrix}
\end{equation}\]</div>
<p>Affine transformations provide a powerful framework for image manipulation, enabling operations such as rotation, translation, scaling, and more. They form the basis for transforming images efficiently and systematically.</p>
<div class="section" id="how-to-derive-an-affine-transformation">
<h3><span class="section-number">2.1.1. </span>How to Derive an Affine Transformation?<a class="headerlink" href="#how-to-derive-an-affine-transformation" title="Permalink to this headline">#</a></h3>
<p>An Affine Transformation represents a fundamental relationship between two images. This connection can be established through different means, generally falling into two categories <span id="id3">[<a class="reference internal" href="References.html#id25" title="OpenCV Developers. Opencv documentation. https://docs.opencv.org/4.x/index.html, 2023. [Online; accessed 01-August-2023].">OpenCV Developers, 2023</a>]</span>:</p>
<ol class="arabic simple">
<li><p><strong>When We Know Both X and T</strong>: In this scenario, we possess knowledge about both sets of points, X and T, and we are aware that these points are related. Our objective is to find the transformation matrix, denoted as M.</p></li>
<li><p><strong>When We Know M and X</strong>: If we have information about the transformation matrix M and the original set of points X, we can easily obtain the transformed set of points T by applying the transformation equation T = M⋅X. This information for M can either be explicit, represented as a 2-by-3 matrix, or it may be inferred from a geometric relationship between points.</p></li>
</ol>
<p>To elucidate the concept further, let’s delve into the scenario described in point (b). When M is the relationship that connects two images, we can analyze the simplest case where M relates three distinct points in both images. Consider the visual representation below <span id="id4">[<a class="reference internal" href="References.html#id25" title="OpenCV Developers. Opencv documentation. https://docs.opencv.org/4.x/index.html, 2023. [Online; accessed 01-August-2023].">OpenCV Developers, 2023</a>]</span>:</p>
<div class="figure align-left" id="id14">
<a class="reference internal image-reference" href="_images/Warp_Affine_0.png"><img alt="_images/Warp_Affine_0.png" src="_images/Warp_Affine_0.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 2.1 </span><span class="caption-text">Image courtesy of <span id="id5">[<a class="reference internal" href="References.html#id25" title="OpenCV Developers. Opencv documentation. https://docs.opencv.org/4.x/index.html, 2023. [Online; accessed 01-August-2023].">OpenCV Developers, 2023</a>]</span>.</span><a class="headerlink" href="#id14" title="Permalink to this image">#</a></p>
</div>
<p>In the image, points 1, 2, and 3 form a triangle in image 1. This same triangle, when mapped into image 2 through the Affine Transformation, undergoes a noticeable change. By determining the Affine Transformation using these three chosen points (which can be selected as needed), we can establish this discovered relationship for all pixels within an image.</p>
<p>This methodology empowers us to apply the same transformation across the entire image, enabling geometric alterations such as rotations, translations, and scaling. Understanding this relationship between points and the transformation matrix forms the foundation for systematically manipulating images with Affine Transformations.</p>
</div>
<div class="section" id="getaffinetransform">
<h3><span class="section-number">2.1.2. </span>getAffineTransform<a class="headerlink" href="#getaffinetransform" title="Permalink to this headline">#</a></h3>
<p>The function <code class="docutils literal notranslate"><span class="pre">cv2.getAffineTransform(src,</span> <span class="pre">dst)</span></code> is a part of the OpenCV library in Python, and it’s used to calculate the Affine Transformation matrix that maps points from one plane (source, <code class="docutils literal notranslate"><span class="pre">src</span></code>) to another plane (destination, <code class="docutils literal notranslate"><span class="pre">dst</span></code>). The Affine Transformation is a linear transformation that involves rotation, translation, and scaling. This transformation matrix can then be used to warp or transform images, shapes, or sets of points from the source plane to the destination plane <span id="id6">[<a class="reference internal" href="References.html#id24" title="G. Bradski. The OpenCV Library. Dr. Dobb's Journal of Software Tools, 2000.">Bradski, 2000</a>, <a class="reference internal" href="References.html#id25" title="OpenCV Developers. Opencv documentation. https://docs.opencv.org/4.x/index.html, 2023. [Online; accessed 01-August-2023].">OpenCV Developers, 2023</a>]</span>.</p>
<p>Here’s a breakdown of the function parameters and return value:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">src</span></code>: The source points, which is a 3x2 array of floating-point coordinates representing the original points in the source plane. It should contain three points (rows), each with two coordinates (columns).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dst</span></code>: The destination points, which is also a 3x2 array of floating-point coordinates. These represent the corresponding points in the destination plane. Just like the source points, it should contain three points with two coordinates each.</p></li>
</ol>
<p>The function calculates the Affine Transformation matrix that best maps the source points to the destination points. This matrix is denoted by the return value <code class="docutils literal notranslate"><span class="pre">retval</span></code>, which is a 2x3 floating-point matrix representing the transformation. The <code class="docutils literal notranslate"><span class="pre">retval</span></code> matrix can be used for various purposes, such as warping images using <code class="docutils literal notranslate"><span class="pre">cv2.warpAffine()</span></code> or transforming sets of points.</p>
<p>To use the Affine Transformation matrix obtained from <code class="docutils literal notranslate"><span class="pre">cv2.getAffineTransform()</span></code>, you’ll typically apply it to an image or points using the <code class="docutils literal notranslate"><span class="pre">cv2.warpAffine()</span></code> function, which performs the actual transformation. This function uses the calculated matrix to apply the transformation to the image or points.</p>
<p><font color='Blue'><b>Example</b></font>:</p>
<p>We use the sklearn <a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.datasets.load_sample_images.html#sklearn.datasets.load_sample_images">image dataset</a> to demonstrate basic operations using Open CV.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.font_manager</span> <span class="kn">import</span> <span class="n">FontProperties</span>
<span class="kn">from</span> <span class="nn">sklearn.datasets</span> <span class="kn">import</span> <span class="n">load_sample_image</span>

<span class="c1"># Import necessary libraries</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>  <span class="c1"># Import the plotting library</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;font.family&#39;</span> <span class="p">:</span> <span class="s1">&#39;Calibri&#39;</span><span class="p">,</span> <span class="s1">&#39;axes.titlesize&#39;</span> <span class="p">:</span> <span class="mi">16</span><span class="p">})</span>  <span class="c1"># Set font properties for plots</span>
<span class="kn">import</span> <span class="nn">cv2</span>  <span class="c1"># Import the OpenCV library</span>

<span class="c1"># Define a function to display images with titles and optional settings</span>
<span class="k">def</span> <span class="nf">ImShow</span><span class="p">(</span><span class="n">Images</span><span class="p">,</span> <span class="n">Names</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Images&#39;</span><span class="p">,</span> <span class="n">grayscale</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="c1"># Create a figure with two subplots</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>  <span class="c1"># Create a figure with 1 row and 2 columns of subplots</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>  <span class="c1"># Flatten the subplots for easier manipulation</span>

    <span class="c1"># Iterate over the first two images</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">grayscale</span><span class="p">:</span>
            <span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">Images</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="s1">&#39;gray&#39;</span><span class="p">)</span>  <span class="c1"># Display the image in grayscale</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">Images</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>  <span class="c1"># Display the image in color</span>
        <span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Set aspect ratio to 1 (square aspect)</span>
        <span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>  <span class="c1"># Turn off axis</span>
        <span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">Names</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">weight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>  <span class="c1"># Set image title with bold font</span>

    <span class="k">if</span> <span class="n">title</span><span class="p">:</span>
        <span class="n">_</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>  <span class="c1"># Set main title if provided</span>
    
    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>  <span class="c1"># Adjust layout for better spacing</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Load an example image</span>
<span class="n">Img</span> <span class="o">=</span> <span class="n">load_sample_image</span><span class="p">(</span><span class="s1">&#39;flower.jpg&#39;</span><span class="p">)</span>

<span class="c1"># Define the source points (original triangle)</span>
<span class="n">src_pts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">([[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">],</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">50</span><span class="p">],</span> <span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">200</span><span class="p">]])</span>

<span class="c1"># Define the destination points (how the triangle should be transformed)</span>
<span class="n">dst_pts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">([[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">50</span><span class="p">],</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">250</span><span class="p">]])</span>

<span class="c1"># Calculate the Affine Transformation matrix</span>
<span class="n">affine_matrix</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">getAffineTransform</span><span class="p">(</span><span class="n">src_pts</span><span class="p">,</span> <span class="n">dst_pts</span><span class="p">)</span>

<span class="c1"># Apply the Affine Transformation to the image</span>
<span class="n">Out</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">warpAffine</span><span class="p">(</span><span class="n">Img</span><span class="p">,</span> <span class="n">affine_matrix</span><span class="p">,</span> <span class="p">(</span><span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

<span class="c1"># Display the original and transformed images with titles</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">ImShow</span><span class="p">(</span><span class="n">Images</span> <span class="o">=</span> <span class="p">[</span><span class="n">Img</span><span class="p">,</span> <span class="n">Out</span><span class="p">],</span>
                 <span class="n">Names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Original Image&#39;</span><span class="p">,</span> <span class="s1">&#39;Transformed Image&#39;</span><span class="p">],</span>
                 <span class="n">title</span><span class="o">=</span><span class="s1">&#39;cv2.getAffineTransform&#39;</span><span class="p">,</span> <span class="n">grayscale</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Mark the source and destination points on the images</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">src_pts</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">src_pts</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>  <span class="c1"># Mark source points on the original image</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">dst_pts</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">dst_pts</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>  <span class="c1"># Mark destination points on the transformed image</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/6175d6ad6a7d3dae57966211f6b93a1476722cc6fc17df87e9270ea0b8471ce0.png" src="_images/6175d6ad6a7d3dae57966211f6b93a1476722cc6fc17df87e9270ea0b8471ce0.png" />
</div>
</div>
<p>This code demonstrates an image transformation using an Affine Transformation:</p>
<ol class="arabic simple">
<li><p>The necessary libraries are imported, including OpenCV (cv2) for image processing, NumPy for numerical operations, Matplotlib for visualization, and Scikit-learn’s <code class="docutils literal notranslate"><span class="pre">load_sample_image</span></code> to load an example image.</p></li>
<li><p>A function <code class="docutils literal notranslate"><span class="pre">ImShow</span></code> is defined to display a pair of images side by side with titles. It takes a list of images, a list of image titles, an optional overall title, and a flag to set axis tight.</p></li>
<li><p>An example image (‘flower.jpg’) is loaded.</p></li>
<li><p>Source points (<code class="docutils literal notranslate"><span class="pre">src_pts</span></code>) and destination points (<code class="docutils literal notranslate"><span class="pre">dst_pts</span></code>) are defined to specify the geometric transformation, specifically an Affine Transformation. These points define the correspondence between a triangle in the original image and how it should appear in the transformed image.</p></li>
<li><p>The Affine Transformation matrix (<code class="docutils literal notranslate"><span class="pre">affine_matrix</span></code>) is calculated using the source and destination points.</p></li>
<li><p>The Affine Transformation is applied to the original image, resulting in the transformed image (<code class="docutils literal notranslate"><span class="pre">result</span></code>).</p></li>
</ol>
</div>
<div class="section" id="image-wrap">
<h3><span class="section-number">2.1.3. </span>Image Wrap<a class="headerlink" href="#image-wrap" title="Permalink to this headline">#</a></h3>
<p>The function you’re referring to, <code class="docutils literal notranslate"><span class="pre">cv2.warpAffine()</span></code>, is part of the OpenCV library, which is a popular computer vision and image processing library in Python. This specific function is used for geometric image transformations, particularly affine transformations. Let’s break down the parameters and its purpose:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>cv2.warpAffine(src, M, dsize[, dst[, flags[, borderMode[, borderValue]]]]) → dst
</pre></div>
</div>
<p>Here’s what each parameter does:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">src</span></code>: This is the input image, which is the source image you want to apply the transformation to. It should be a NumPy array (image) in most cases.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">M</span></code>: This parameter represents the transformation matrix. It’s a 2x3 matrix that defines the affine transformation. The matrix includes parameters like scaling, rotation, translation, and shearing. The transformation matrix <code class="docutils literal notranslate"><span class="pre">M</span></code> is used to specify how each pixel in the source image should be mapped to the destination image.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dsize</span></code>: This is the size (width and height) of the output image (destination image) you want to create after applying the transformation. It’s specified as a tuple (width, height).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dst</span></code> (optional): This is the output image where the transformed image will be stored. If not provided, a new image will be created to store the result.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">flags</span></code> (optional): This parameter specifies the interpolation method to be used during the transformation. Different methods can be used to determine the pixel values of the output image at locations that do not exactly map to locations in the source image.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">borderMode</span></code> (optional): This parameter determines how to handle pixels that fall outside the boundaries of the source image. It defines the border mode.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">borderValue</span></code> (optional): When a pixel is outside the source image boundaries, this parameter specifies the value that should be used for the pixel.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">→</span> <span class="pre">dst</span></code>: This indicates that the function returns the destination image, which contains the result of the affine transformation.</p></li>
</ol>
<p><font color='Blue'><b>Example</b></font>:</p>
<p>We utilize the <a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.datasets.load_sample_images.html#sklearn.datasets.load_sample_images">image dataset function</a> from scikit-learn to showcase fundamental image manipulation operations using OpenCV.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import necessary libraries</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">from</span> <span class="nn">sklearn.datasets</span> <span class="kn">import</span> <span class="n">load_sample_image</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.font_manager</span> <span class="kn">import</span> <span class="n">FontProperties</span>

<span class="c1"># Load the sample image</span>
<span class="n">Img</span> <span class="o">=</span> <span class="n">load_sample_image</span><span class="p">(</span><span class="s1">&#39;china.jpg&#39;</span><span class="p">)</span>

<span class="c1"># Define a function to create a 2D translation matrix</span>
<span class="k">def</span> <span class="nf">map_matrix</span><span class="p">(</span><span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">):</span>
    <span class="c1"># Create a 2x3 transformation matrix with translation values (tx, ty)</span>
    <span class="n">M</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)[:</span><span class="mi">2</span><span class="p">,</span> <span class="p">:]</span>
    <span class="n">M</span><span class="p">[:,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">M</span>

<span class="c1"># Apply the affine transformation to the image using warpAffine</span>
<span class="c1"># with translation values tx = 10 and ty = 20</span>
<span class="n">Out</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">warpAffine</span><span class="p">(</span><span class="n">Img</span><span class="p">,</span> <span class="n">map_matrix</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>

<span class="c1"># Display the original and transformed images with titles</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">ImShow</span><span class="p">([</span><span class="n">Img</span><span class="p">,</span> <span class="n">Out</span><span class="p">],</span> 
                 <span class="p">[</span><span class="s1">&#39;Original Image&#39;</span><span class="p">,</span> <span class="s1">&#39;warpAffine Image with tx = 10, ty = 20&#39;</span><span class="p">],</span>
                 <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Image Wrap&#39;</span><span class="p">)</span>
    
<span class="c1"># Add text indicating the size of the original and transformed images</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mf">0.02</span> <span class="o">*</span> <span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">s</span><span class="o">=</span><span class="s1">&#39;Size: </span><span class="si">%i</span><span class="s1"> by </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
               <span class="n">size</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;Navy&#39;</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="n">ec</span><span class="o">=</span><span class="s1">&#39;Navy&#39;</span><span class="p">,</span> <span class="n">fc</span><span class="o">=</span><span class="s1">&#39;LightSkyBlue&#39;</span><span class="p">))</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mf">0.02</span> <span class="o">*</span> <span class="n">Out</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">s</span><span class="o">=</span><span class="s1">&#39;Size: </span><span class="si">%i</span><span class="s1"> by </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Out</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Out</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
               <span class="n">size</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;Navy&#39;</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="n">ec</span><span class="o">=</span><span class="s1">&#39;Navy&#39;</span><span class="p">,</span> <span class="n">fc</span><span class="o">=</span><span class="s1">&#39;LightSkyBlue&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/f578b0d71bd2866b6ba55b8d4bb72b5e3d3d3c91c8da900a73a24b2338f75709.png" src="_images/f578b0d71bd2866b6ba55b8d4bb72b5e3d3d3c91c8da900a73a24b2338f75709.png" />
</div>
</div>
<p>This code demonstrates how to perform a 2D translation on an image using the OpenCV library in Python. It uses the warpAffine function to apply an affine transformation to the input image, resulting in a translated version of the original image. The code then displays both the original and transformed images side by side in a visualization using Matplotlib.</p>
<p>Here’s a step-by-step breakdown of the code:</p>
<ol class="arabic simple">
<li><p>Import necessary libraries:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">numpy</span></code> (as <code class="docutils literal notranslate"><span class="pre">np</span></code>): For numerical operations.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cv2</span></code>: OpenCV, a computer vision library, for image manipulation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">load_sample_image</span></code> from <code class="docutils literal notranslate"><span class="pre">sklearn.datasets</span></code>: To load a sample image (in this case, ‘china.jpg’).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">matplotlib.pyplot</span></code> (as <code class="docutils literal notranslate"><span class="pre">plt</span></code>): For visualization.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">matplotlib.font_manager.FontProperties</span></code>: For setting font properties (although the ‘font’ variable is not defined in the code).</p></li>
</ul>
</li>
<li><p>Load the sample image:</p>
<ul class="simple">
<li><p>The sample image ‘china.jpg’ is loaded using the <code class="docutils literal notranslate"><span class="pre">load_sample_image</span></code> function.</p></li>
</ul>
</li>
<li><p>Define a function to create a 2D translation matrix:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">map_matrix</span></code> function generates a 2x3 transformation matrix for translation with given translation values (tx, ty).</p></li>
</ul>
</li>
<li><p>Apply the affine transformation to the image:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">cv2.warpAffine</span></code> function is used to apply the transformation matrix generated by <code class="docutils literal notranslate"><span class="pre">map_matrix</span></code> to the input image with translation values <code class="docutils literal notranslate"><span class="pre">tx</span> <span class="pre">=</span> <span class="pre">10</span></code> and <code class="docutils literal notranslate"><span class="pre">ty</span> <span class="pre">=</span> <span class="pre">20</span></code>. The result is stored in the <code class="docutils literal notranslate"><span class="pre">Out</span></code> variable.</p></li>
</ul>
</li>
</ol>
<p>The code provides a clear and visually appealing representation of the original image and its translation with the specified translation values (tx = 10, ty = 20). The resulting images, along with their sizes, are displayed side by side.</p>
<p><font color='Blue'><b>Example</b></font>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define source and destination points for the affine transformation</span>
<span class="n">pts1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">([[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="p">[</span><span class="mi">150</span><span class="p">,</span> <span class="mi">50</span><span class="p">],</span> <span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">150</span><span class="p">]])</span>  <span class="c1"># Source points</span>
<span class="n">pts2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">([[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">50</span><span class="p">],</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">250</span><span class="p">]])</span>  <span class="c1"># Destination points</span>

<span class="c1"># Get the affine transformation matrix using the source and destination points</span>
<span class="n">M</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">getAffineTransform</span><span class="p">(</span><span class="n">pts1</span><span class="p">,</span> <span class="n">pts2</span><span class="p">)</span>  <span class="c1"># Computes the transformation matrix</span>
<span class="k">del</span> <span class="n">pts1</span><span class="p">,</span> <span class="n">pts2</span>  <span class="c1"># Clean up, we no longer need the points</span>

<span class="c1"># Load the sample image</span>
<span class="n">Img</span> <span class="o">=</span> <span class="n">load_sample_image</span><span class="p">(</span><span class="s1">&#39;china.jpg&#39;</span><span class="p">)</span>
                        
<span class="c1"># Apply the affine transformation to the image using warpAffine</span>
<span class="n">Out</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">warpAffine</span><span class="p">(</span><span class="n">Img</span><span class="p">,</span> <span class="n">M</span><span class="p">,</span> <span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>  <span class="c1"># Transformed image</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">ImShow</span><span class="p">([</span><span class="n">Img</span><span class="p">,</span> <span class="n">Out</span><span class="p">],</span>
                 <span class="p">[</span><span class="s1">&#39;Original Image&#39;</span><span class="p">,</span> <span class="s1">&#39;warpAffine Image using getAffineTransform&#39;</span><span class="p">],</span>
                 <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Image Wrap&#39;</span><span class="p">)</span>

<span class="c1"># Add text indicating the size of the original and transformed images</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mf">0.02</span> <span class="o">*</span> <span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">s</span><span class="o">=</span><span class="s1">&#39;Size: </span><span class="si">%i</span><span class="s1"> by </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
               <span class="n">size</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;Navy&#39;</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="n">ec</span><span class="o">=</span><span class="s1">&#39;Navy&#39;</span><span class="p">,</span> <span class="n">fc</span><span class="o">=</span><span class="s1">&#39;LightSkyBlue&#39;</span><span class="p">))</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mf">0.02</span> <span class="o">*</span> <span class="n">Out</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">s</span><span class="o">=</span><span class="s1">&#39;Size: </span><span class="si">%i</span><span class="s1"> by </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Out</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Out</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
               <span class="n">size</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;Navy&#39;</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="n">ec</span><span class="o">=</span><span class="s1">&#39;Navy&#39;</span><span class="p">,</span> <span class="n">fc</span><span class="o">=</span><span class="s1">&#39;LightSkyBlue&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/b51b8fd47bfe2a44454529ff476e15dc488bbec91a2cfa529f142d55c94cd8f8.png" src="_images/b51b8fd47bfe2a44454529ff476e15dc488bbec91a2cfa529f142d55c94cd8f8.png" />
</div>
</div>
<p>This code demonstrates the application of an affine transformation on an image using OpenCV. Here’s a detailed breakdown of the code:</p>
<ol class="arabic simple">
<li><p><strong>Define Source and Destination Points</strong>: Two sets of points, <code class="docutils literal notranslate"><span class="pre">pts1</span></code> (source points) and <code class="docutils literal notranslate"><span class="pre">pts2</span></code> (destination points), are defined. These points represent corresponding locations in the original and transformed images that will be used to calculate the affine transformation.</p></li>
<li><p><strong>Compute Affine Transformation Matrix</strong>: The <code class="docutils literal notranslate"><span class="pre">cv2.getAffineTransform</span></code> function computes the 2x3 affine transformation matrix <code class="docutils literal notranslate"><span class="pre">M</span></code> that maps the source points to the destination points. This matrix represents the geometric transformation required to achieve the desired translation.</p></li>
<li><p><strong>Apply Affine Transformation</strong>: The <code class="docutils literal notranslate"><span class="pre">cv2.warpAffine</span></code> function is used to apply the computed transformation matrix <code class="docutils literal notranslate"><span class="pre">M</span></code> to the input image (<code class="docutils literal notranslate"><span class="pre">Img</span></code>). This results in the transformed image (<code class="docutils literal notranslate"><span class="pre">Out</span></code>) after the specified affine translation.</p></li>
<li><p><strong>Visualize Original and Transformed Images</strong>: A Matplotlib figure with two subplots is created. The original image (<code class="docutils literal notranslate"><span class="pre">Img</span></code>) is displayed in the first subplot, and the transformed image (<code class="docutils literal notranslate"><span class="pre">Out</span></code>) is displayed in the second subplot.</p></li>
</ol>
</div>
</div>
<div class="section" id="resize">
<h2><span class="section-number">2.2. </span>Resize<a class="headerlink" href="#resize" title="Permalink to this headline">#</a></h2>
</div>
<div class="section" id="resizing-images-with-opencv">
<h2><span class="section-number">2.3. </span>Resizing Images with OpenCV<a class="headerlink" href="#resizing-images-with-opencv" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">resize</span></code> function in OpenCV is a versatile tool for adjusting the size of images, whether making them smaller or larger. It offers several options for defining the output size or using scaling factors to control the resizing process, providing the flexibility needed for various image manipulation tasks <span id="id7">[<a class="reference internal" href="References.html#id24" title="G. Bradski. The OpenCV Library. Dr. Dobb's Journal of Software Tools, 2000.">Bradski, 2000</a>, <a class="reference internal" href="References.html#id25" title="OpenCV Developers. Opencv documentation. https://docs.opencv.org/4.x/index.html, 2023. [Online; accessed 01-August-2023].">OpenCV Developers, 2023</a>]</span>.</p>
<p><strong>Key Concepts:</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">resize</span></code> function is essential for handling image dimensions. Here’s a breakdown of its capabilities:</p>
<ol class="arabic">
<li><p><strong>Resizing an Image:</strong>
The primary purpose of <code class="docutils literal notranslate"><span class="pre">resize</span></code> is to change the size of an image. This can involve reducing or increasing the image’s dimensions. The function allows explicit size specification or resizing based on scaling factors (<code class="docutils literal notranslate"><span class="pre">fx</span></code> and <code class="docutils literal notranslate"><span class="pre">fy</span></code>). Importantly, the initial type or size of the output image (<code class="docutils literal notranslate"><span class="pre">dst</span></code>) is not used. Instead, it’s determined based on the source image (<code class="docutils literal notranslate"><span class="pre">src</span></code>), the desired output size (<code class="docutils literal notranslate"><span class="pre">dsize</span></code>), and the specified scaling factors.</p></li>
<li><p><strong>Explicit Output Size:</strong>
If you want to resize <code class="docutils literal notranslate"><span class="pre">src</span></code> to fit a pre-created destination image <code class="docutils literal notranslate"><span class="pre">dst</span></code>, you can achieve this by calling the function as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">resize</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">,</span> <span class="n">dst</span><span class="o">.</span><span class="n">size</span><span class="p">(),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">interpolation</span><span class="p">)</span>
</pre></div>
</div>
<p>Here, <code class="docutils literal notranslate"><span class="pre">dsize</span></code> is set to match the size of <code class="docutils literal notranslate"><span class="pre">dst</span></code>, and the scaling factors <code class="docutils literal notranslate"><span class="pre">fx</span></code> and <code class="docutils literal notranslate"><span class="pre">fy</span></code> are automatically computed based on that.</p>
</li>
<li><p><strong>Using Scaling Factors:</strong>
You can also use scaling factors to control the resizing process. For instance, to decrease the size of the image by a factor of 2 in both the horizontal and vertical directions (decimation), you can use the following approach:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">resize</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">,</span> <span class="n">Size</span><span class="p">(),</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">interpolation</span><span class="p">)</span>
</pre></div>
</div>
<p>Here, <code class="docutils literal notranslate"><span class="pre">fx</span></code> and <code class="docutils literal notranslate"><span class="pre">fy</span></code> are explicitly specified, and the function calculates the destination image size based on these factors.</p>
</li>
<li><p><strong>Selecting Interpolation:</strong>
When shrinking an image, the <code class="docutils literal notranslate"><span class="pre">INTER_AREA</span></code> interpolation method is recommended for the best results in terms of image quality. On the other hand, when enlarging an image, using <code class="docutils literal notranslate"><span class="pre">INTER_CUBIC</span></code> (higher quality, but slower) or <code class="docutils literal notranslate"><span class="pre">INTER_LINEAR</span></code> (faster but still acceptable quality) interpolation methods is generally recommended.</p></li>
</ol>
<p><strong>Function Parameters:</strong></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">src</span></code>: The input image to be resized.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dst</span></code>: The output image. Its size can be explicitly set using <code class="docutils literal notranslate"><span class="pre">dsize</span></code>, or it can be determined automatically based on <code class="docutils literal notranslate"><span class="pre">src.size()</span></code>, <code class="docutils literal notranslate"><span class="pre">fx</span></code>, and <code class="docutils literal notranslate"><span class="pre">fy</span></code>. The type of <code class="docutils literal notranslate"><span class="pre">dst</span></code> matches the type of <code class="docutils literal notranslate"><span class="pre">src</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dsize</span></code>: The desired output image size. If set to zero (None in Python), the function calculates it as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dsize</span> <span class="o">=</span> <span class="n">Size</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">fx</span> <span class="o">*</span> <span class="n">src</span><span class="o">.</span><span class="n">cols</span><span class="p">),</span> <span class="nb">round</span><span class="p">(</span><span class="n">fy</span> <span class="o">*</span> <span class="n">src</span><span class="o">.</span><span class="n">rows</span><span class="p">))</span>
</pre></div>
</div>
<p>Either <code class="docutils literal notranslate"><span class="pre">dsize</span></code> or both <code class="docutils literal notranslate"><span class="pre">fx</span></code> and <code class="docutils literal notranslate"><span class="pre">fy</span></code> must be non-zero.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">fx</span></code>: The scaling factor along the horizontal axis (width). If <code class="docutils literal notranslate"><span class="pre">fx</span></code> is 0, it’s computed as <code class="docutils literal notranslate"><span class="pre">(double)dsize.width</span> <span class="pre">/</span> <span class="pre">src.cols</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fy</span></code>: The scaling factor along the vertical axis (height). If <code class="docutils literal notranslate"><span class="pre">fy</span></code> is 0, it’s computed as <code class="docutils literal notranslate"><span class="pre">(double)dsize.height</span> <span class="pre">/</span> <span class="pre">src.rows</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interpolation</span></code>: The interpolation method used during the resizing operation (e.g., <code class="docutils literal notranslate"><span class="pre">INTER_NEAREST</span></code>, <code class="docutils literal notranslate"><span class="pre">INTER_LINEAR</span></code>, <code class="docutils literal notranslate"><span class="pre">INTER_CUBIC</span></code>, <code class="docutils literal notranslate"><span class="pre">INTER_LANCZOS4</span></code>).</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">resize</span></code> function allows you to resize images while maintaining control over the output size and selecting appropriate interpolation methods to achieve the desired quality.</p>
<p><strong>Syntax:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>cv2.resize(src, dsize[, dst[, fx[, fy[, interpolation]]]]) → dst
</pre></div>
</div>
<p>Here’s what each parameter does:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">src</span></code>: The input image that you want to resize. It should be a NumPy array (image) in most cases.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dsize</span></code>: The desired size (width and height) of the output image. It’s specified as a tuple (width, height). If you provide this parameter, the <code class="docutils literal notranslate"><span class="pre">fx</span></code> and <code class="docutils literal notranslate"><span class="pre">fy</span></code> parameters (scaling factors) are ignored.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dst</span></code> (optional): The output image where the resized image will be stored. If not provided, a new image will be created to store the result.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fx</span></code> (optional): The scale factor along the horizontal axis (width) by which you want to resize the image. If you provide <code class="docutils literal notranslate"><span class="pre">fx</span></code>, the <code class="docutils literal notranslate"><span class="pre">dsize</span></code> parameter is ignored on that axis.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fy</span></code> (optional): The scale factor along the vertical axis (height) by which you want to resize the image. If you provide <code class="docutils literal notranslate"><span class="pre">fy</span></code>, the <code class="docutils literal notranslate"><span class="pre">dsize</span></code> parameter is ignored on that axis.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interpolation</span></code> (optional): The interpolation method to be used during the resizing operation. Interpolation determines how pixel values are computed for the output image based on the input image. Common interpolation methods include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cv2.INTER_NEAREST</span></code>: Nearest-neighbor interpolation (fast but may produce blocky results).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cv2.INTER_LINEAR</span></code>: Bilinear interpolation (good for most general-purpose resizing).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cv2.INTER_CUBIC</span></code>: Bicubic interpolation (better quality, but slower).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cv2.INTER_LANCZOS4</span></code>: Lanczos interpolation (high-quality but slower).</p></li>
</ul>
</li>
</ol>
<p>The <code class="docutils literal notranslate"><span class="pre">cv2.resize()</span></code> function resizes the input image based on the specified size or scaling factors and the chosen interpolation method. The function returns the resized image, and if you provided the <code class="docutils literal notranslate"><span class="pre">dst</span></code> parameter, the resized image is stored in the <code class="docutils literal notranslate"><span class="pre">dst</span></code> array; otherwise, a new image is created and returned. The <code class="docutils literal notranslate"><span class="pre">dst</span></code> parameter allows you to reuse an existing image array for efficiency.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the sample image</span>
<span class="n">Img</span> <span class="o">=</span> <span class="n">load_sample_image</span><span class="p">(</span><span class="s1">&#39;china.jpg&#39;</span><span class="p">)</span>
                        
<span class="c1"># Resize the original image using cubic interpolation</span>
<span class="n">Out</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">Img</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">fx</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">fy</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="n">cv2</span><span class="o">.</span><span class="n">INTER_CUBIC</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">ImShow</span><span class="p">([</span><span class="n">Img</span><span class="p">,</span> <span class="n">Out</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Original Image&#39;</span><span class="p">,</span> <span class="s1">&#39;Resized Image&#39;</span><span class="p">],</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Resize&#39;</span><span class="p">)</span>

<span class="c1"># Add text indicating the size of the original and resized images</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mf">0.02</span> <span class="o">*</span> <span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">s</span><span class="o">=</span><span class="s1">&#39;Size: </span><span class="si">%i</span><span class="s1"> by </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
               <span class="n">size</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;Navy&#39;</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="n">ec</span><span class="o">=</span><span class="s1">&#39;Navy&#39;</span><span class="p">,</span> <span class="n">fc</span><span class="o">=</span><span class="s1">&#39;LightSkyBlue&#39;</span><span class="p">))</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mf">0.02</span> <span class="o">*</span> <span class="n">Out</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">s</span><span class="o">=</span><span class="s1">&#39;Size: </span><span class="si">%i</span><span class="s1"> by </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Out</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Out</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
               <span class="n">size</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;Navy&#39;</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="n">ec</span><span class="o">=</span><span class="s1">&#39;Navy&#39;</span><span class="p">,</span> <span class="n">fc</span><span class="o">=</span><span class="s1">&#39;LightSkyBlue&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/fa4a91ae245be7cd2db0e0cbd661caf3a3a72ca8cb124156e082c11348f12e16.png" src="_images/fa4a91ae245be7cd2db0e0cbd661caf3a3a72ca8cb124156e082c11348f12e16.png" />
</div>
</div>
<p>This code resizes the original image using cubic interpolation, creating a larger version of the image (<code class="docutils literal notranslate"><span class="pre">Out</span></code>). The original and resized images are displayed side by side in a Matplotlib figure, with annotations indicating the sizes of both images. The code also includes aesthetic adjustments, such as turning off axes and setting the aspect ratio to 1 for both subplots.</p>
</div>
<div class="section" id="warp-perspective">
<h2><span class="section-number">2.4. </span>Warp Perspective<a class="headerlink" href="#warp-perspective" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">cv2.warpPerspective()</span></code> function in the Python OpenCV library is a powerful tool used for performing perspective transformations on an input image. These transformations allow you to change the perspective view of an object within an image, simulating effects like changing the viewpoint or correcting for distortions caused by the camera’s perspective. The primary purpose of this function is to apply a given 3x3 transformation matrix to the input image, resulting in a transformed output image <span id="id8">[<a class="reference internal" href="References.html#id24" title="G. Bradski. The OpenCV Library. Dr. Dobb's Journal of Software Tools, 2000.">Bradski, 2000</a>, <a class="reference internal" href="References.html#id25" title="OpenCV Developers. Opencv documentation. https://docs.opencv.org/4.x/index.html, 2023. [Online; accessed 01-August-2023].">OpenCV Developers, 2023</a>]</span>.</p>
<div class="section" id="perspective-transformation">
<h3><span class="section-number">2.4.1. </span>Perspective Transformation<a class="headerlink" href="#perspective-transformation" title="Permalink to this headline">#</a></h3>
<p>Perspective transformations are essential for various computer vision tasks, including image rectification, object recognition, and more. They involve manipulating the positions of points in an image, effectively warping the image based on a specified transformation matrix. This matrix, denoted as <code class="docutils literal notranslate"><span class="pre">M</span></code>,</p>
<div class="amsmath math notranslate nohighlight" id="equation-c55c8e91-7fad-4941-bc74-7318289cd260">
<span class="eqno">(2.5)<a class="headerlink" href="#equation-c55c8e91-7fad-4941-bc74-7318289cd260" title="Permalink to this equation">#</a></span>\[\begin{equation}
M = \begin{bmatrix} M_{11} &amp; M_{12} &amp; M_{13} \\M_{21} &amp; M_{22} &amp; M_{23}  \\M_{31} &amp; M_{32} &amp; M_{33} \end{bmatrix}
\end{equation}\]</div>
<p>describes how the points in the source image (<code class="docutils literal notranslate"><span class="pre">src</span></code>) should be transformed to obtain their corresponding positions in the destination image (<code class="docutils literal notranslate"><span class="pre">dst</span></code>).</p>
<p>The transformation is defined by the following equation:</p>
<div class="amsmath math notranslate nohighlight" id="equation-5fa55504-1b92-4b22-936f-fd31205dbd20">
<span class="eqno">(2.6)<a class="headerlink" href="#equation-5fa55504-1b92-4b22-936f-fd31205dbd20" title="Permalink to this equation">#</a></span>\[\begin{equation}
\texttt{dst} (x,y) = \texttt{src} \left ( \frac{M_{11} x + M_{12} y + M_{13}}{M_{31} x + M_{32} y + M_{33}} , \frac{M_{21} x + M_{22} y + M_{23}}{M_{31} x + M_{32} y + M_{33}} \right )
\end{equation}\]</div>
<p>When the flag <code class="docutils literal notranslate"><span class="pre">WARP_INVERSE_MAP</span></code> is set, the function uses the inverse of the transformation matrix for the calculation. Otherwise, the transformation is inverted using the <code class="docutils literal notranslate"><span class="pre">invert</span></code> function before being applied. The function does not operate in-place; it generates a new transformed image as the output.</p>
</div>
<div class="section" id="parameters">
<h3><span class="section-number">2.4.2. </span>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">#</a></h3>
<p>Here’s a detailed explanation of the parameters used in the <code class="docutils literal notranslate"><span class="pre">cv2.warpPerspective()</span></code> function:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">src</span></code>: This parameter represents the input image you want to transform using the perspective transformation. It should be a numpy array, representing the image you wish to warp.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">M</span></code>: The <code class="docutils literal notranslate"><span class="pre">M</span></code> parameter is a 3x3 transformation matrix that defines the perspective transformation. This matrix describes how the points in the source image (<code class="docutils literal notranslate"><span class="pre">src</span></code>) should be transformed to obtain the corresponding points in the destination image (<code class="docutils literal notranslate"><span class="pre">dst</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dsize</span></code>: The <code class="docutils literal notranslate"><span class="pre">dsize</span></code> parameter specifies the size of the output image (<code class="docutils literal notranslate"><span class="pre">dst</span></code>). It is a tuple containing the width and height of the destination image. The transformed input image (<code class="docutils literal notranslate"><span class="pre">src</span></code>) will be resized to this size.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dst</span></code> (optional): The <code class="docutils literal notranslate"><span class="pre">dst</span></code> parameter serves as the output image where the result of the perspective transformation will be stored. If this parameter is not provided, a new image will be created to hold the transformed result.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">flags</span></code> (optional): The <code class="docutils literal notranslate"><span class="pre">flags</span></code> parameter provides additional transformation options. It can be a combination of transformation flags, but it is often set to <code class="docutils literal notranslate"><span class="pre">cv2.INTER_LINEAR</span></code> for bilinear interpolation, which provides a good trade-off between speed and quality.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">borderMode</span></code> (optional): The <code class="docutils literal notranslate"><span class="pre">borderMode</span></code> parameter specifies how the border of the output image (<code class="docutils literal notranslate"><span class="pre">dst</span></code>) should be filled. It can be set to different border modes, such as <code class="docutils literal notranslate"><span class="pre">cv2.BORDER_CONSTANT</span></code> or <code class="docutils literal notranslate"><span class="pre">cv2.BORDER_REPLICATE</span></code>, depending on the desired behavior.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">borderValue</span></code> (optional): The <code class="docutils literal notranslate"><span class="pre">borderValue</span></code> parameter is used to specify the value used for padding if the <code class="docutils literal notranslate"><span class="pre">borderMode</span></code> is set to <code class="docutils literal notranslate"><span class="pre">cv2.BORDER_CONSTANT</span></code>.</p></li>
</ul>
</div>
<div class="section" id="function-signature">
<h3><span class="section-number">2.4.3. </span>Function Signature<a class="headerlink" href="#function-signature" title="Permalink to this headline">#</a></h3>
<p>Here’s the structure of the function signature:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cv2</span><span class="o">.</span><span class="n">warpPerspective</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">M</span><span class="p">,</span> <span class="n">dsize</span><span class="p">[,</span> <span class="n">dst</span><span class="p">[,</span> <span class="n">flags</span><span class="p">[,</span> <span class="n">borderMode</span><span class="p">[,</span> <span class="n">borderValue</span><span class="p">]]]])</span> <span class="o">-&gt;</span> <span class="n">dst</span>
</pre></div>
</div>
</div>
<div class="section" id="usage-and-importance">
<h3><span class="section-number">2.4.4. </span>Usage and Importance<a class="headerlink" href="#usage-and-importance" title="Permalink to this headline">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">cv2.warpPerspective()</span></code> function is a fundamental component in many image processing pipelines. It enables handling perspective effects, correcting image distortions, and preparing images for further analysis or visualization. By understanding and utilizing perspective transformations, you can significantly enhance the capabilities of your computer vision applications.</p>
<p>For more detailed information and examples of using <code class="docutils literal notranslate"><span class="pre">warpPerspective</span></code>, you can refer to the <a class="reference external" href="https://docs.opencv.org/2.4/modules/imgproc/doc/geometric_transformations.html#cv2.warpPerspective">OpenCV documentation</a>. This function is essential for tasks that require precise geometric adjustments in images, making it a valuable tool in various computer vision scenarios.</p>
<p><font color='Blue'><b>Example</b></font>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Define the source and destination points for perspective transformation</span>
<span class="n">pts1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">([[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">],</span> <span class="p">[</span><span class="mi">350</span><span class="p">,</span> <span class="mi">50</span><span class="p">],</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">380</span><span class="p">],</span> <span class="p">[</span><span class="mi">380</span><span class="p">,</span> <span class="mi">400</span><span class="p">]])</span>  <span class="c1"># Source points</span>
<span class="n">pts2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">400</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">400</span><span class="p">],</span> <span class="p">[</span><span class="mi">400</span><span class="p">,</span> <span class="mi">400</span><span class="p">]])</span>  <span class="c1"># Destination points</span>

<span class="c1"># Calculate the perspective transformation matrix</span>
<span class="n">M</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">getPerspectiveTransform</span><span class="p">(</span><span class="n">pts1</span><span class="p">,</span> <span class="n">pts2</span><span class="p">)</span>

<span class="c1"># Apply the perspective transformation to the input image</span>
<span class="n">Out</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">warpPerspective</span><span class="p">(</span><span class="n">Img</span><span class="p">,</span> <span class="n">M</span><span class="p">,</span> <span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">400</span><span class="p">))</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">ImShow</span><span class="p">([</span><span class="n">Img</span><span class="p">,</span> <span class="n">Out</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Original Image&#39;</span><span class="p">,</span> <span class="s1">&#39;Warped Imag&#39;</span><span class="p">],</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Warp Perspective&#39;</span><span class="p">)</span>

<span class="c1"># Add text to indicate the size of the original and transformed images</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mf">0.02</span> <span class="o">*</span> <span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">s</span><span class="o">=</span><span class="s1">&#39;Size: </span><span class="si">%i</span><span class="s1"> by </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
               <span class="n">size</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;Navy&#39;</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="n">ec</span><span class="o">=</span><span class="s1">&#39;Navy&#39;</span><span class="p">,</span> <span class="n">fc</span><span class="o">=</span><span class="s1">&#39;LightSkyBlue&#39;</span><span class="p">))</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mf">0.02</span> <span class="o">*</span> <span class="n">Out</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">s</span><span class="o">=</span><span class="s1">&#39;Size: </span><span class="si">%i</span><span class="s1"> by </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Out</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Out</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
               <span class="n">size</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;Navy&#39;</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="n">ec</span><span class="o">=</span><span class="s1">&#39;Navy&#39;</span><span class="p">,</span> <span class="n">fc</span><span class="o">=</span><span class="s1">&#39;LightSkyBlue&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/af8527a0f703290535d8f24d0e258a811ef13fb670a8366ff357c2fde648b9b9.png" src="_images/af8527a0f703290535d8f24d0e258a811ef13fb670a8366ff357c2fde648b9b9.png" />
</div>
</div>
<p>This code performs a perspective transformation on an input image using the OpenCV library and then displays the original and transformed images side by side using Matplotlib. Let’s break it down step by step:</p>
<ol class="arabic simple">
<li><p>Import necessary libraries:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">numpy</span></code> as <code class="docutils literal notranslate"><span class="pre">np</span></code>: For numerical operations.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cv2</span></code>: The OpenCV library for computer vision tasks.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">matplotlib.pyplot</span></code> as <code class="docutils literal notranslate"><span class="pre">plt</span></code>: For plotting and visualization.</p></li>
</ul>
</li>
<li><p>Define source and destination points for perspective transformation:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pts1</span></code>: An array containing the source points in the original image.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pts2</span></code>: An array containing the corresponding destination points after the transformation.</p></li>
</ul>
</li>
<li><p>Calculate the perspective transformation matrix:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cv2.getPerspectiveTransform(pts1,</span> <span class="pre">pts2)</span></code>: This function computes the transformation matrix (M) required to map the source points (pts1) to the destination points (pts2).</p></li>
</ul>
</li>
<li><p>Apply the perspective transformation to the input image:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cv2.warpPerspective(Img,</span> <span class="pre">M,</span> <span class="pre">(400,</span> <span class="pre">400))</span></code>: Applies the perspective transformation specified by the transformation matrix (M) to the input image (Img) and generates the transformed output image with a size of 400x400 pixels.</p></li>
</ul>
</li>
</ol>
</div>
</div>
<div class="section" id="camera-calibration">
<h2><span class="section-number">2.5. </span>Camera Calibration<a class="headerlink" href="#camera-calibration" title="Permalink to this headline">#</a></h2>
<p>In computer vision, camera calibration is a crucial process that aims to correct lens distortions and determine intrinsic and extrinsic camera parameters. Cameras often introduce two significant types of distortion: radial distortion and tangential distortion <span id="id9">[<a class="reference internal" href="References.html#id24" title="G. Bradski. The OpenCV Library. Dr. Dobb's Journal of Software Tools, 2000.">Bradski, 2000</a>, <a class="reference internal" href="References.html#id25" title="OpenCV Developers. Opencv documentation. https://docs.opencv.org/4.x/index.html, 2023. [Online; accessed 01-August-2023].">OpenCV Developers, 2023</a>]</span>.</p>
<p><strong>Radial Distortion</strong>: Radial distortion causes straight lines to appear curved. It becomes more pronounced the farther points are from the center of the image. For instance, in the image below, the red lines indicate expected straight lines on the chessboard, but they appear distorted. This distortion is especially noticeable along the chessboard’s edges, which curve outward.</p>
<div class="figure align-left" id="id15">
<a class="reference internal image-reference" href="_images/calib_radial.jpg"><img alt="_images/calib_radial.jpg" src="_images/calib_radial.jpg" style="width: 350px;" /></a>
<p class="caption"><span class="caption-number">Fig. 2.2 </span><span class="caption-text">Image courtesy of <span id="id10">[<a class="reference internal" href="References.html#id25" title="OpenCV Developers. Opencv documentation. https://docs.opencv.org/4.x/index.html, 2023. [Online; accessed 01-August-2023].">OpenCV Developers, 2023</a>]</span>.</span><a class="headerlink" href="#id15" title="Permalink to this image">#</a></p>
</div>
<p>Mathematically, radial distortion can be represented as follows:</p>
<div class="amsmath math notranslate nohighlight" id="equation-14dd2b6c-0a58-45ec-9dad-aefe4fddf289">
<span class="eqno">(2.7)<a class="headerlink" href="#equation-14dd2b6c-0a58-45ec-9dad-aefe4fddf289" title="Permalink to this equation">#</a></span>\[\begin{equation}
x_{\text{distorted}} = x \times (1 + k_1 r^2 + k_2 r^4 + k_3 r^6)
\end{equation}\]</div>
<div class="amsmath math notranslate nohighlight" id="equation-c93047b4-c248-4769-887a-f5d077965957">
<span class="eqno">(2.8)<a class="headerlink" href="#equation-c93047b4-c248-4769-887a-f5d077965957" title="Permalink to this equation">#</a></span>\[\begin{equation}
y_{\text{distorted}} = y \times (1 + k_1 r^2 + k_2 r^4 + k_3 r^6)
\end{equation}\]</div>
<p><strong>Tangential Distortion</strong>: Tangential distortion arises when the camera’s imaging lens is not perfectly aligned parallel to the imaging plane. This can cause certain areas in the image to appear closer than expected. The amount of tangential distortion can be represented as:</p>
<div class="amsmath math notranslate nohighlight" id="equation-fc7ec81d-5530-4328-ad0f-25abaedc2b34">
<span class="eqno">(2.9)<a class="headerlink" href="#equation-fc7ec81d-5530-4328-ad0f-25abaedc2b34" title="Permalink to this equation">#</a></span>\[\begin{equation}
x_{\text{distorted}} = x + (2p_1xy + p_2(r^2 + 2x^2))
\end{equation}\]</div>
<div class="amsmath math notranslate nohighlight" id="equation-31943ad5-276c-4b21-aeb1-7b49fee5937e">
<span class="eqno">(2.10)<a class="headerlink" href="#equation-31943ad5-276c-4b21-aeb1-7b49fee5937e" title="Permalink to this equation">#</a></span>\[\begin{equation}
y_{\text{distorted}} = y + (p_1(r^2 + 2y^2) + 2p_2xy)
\end{equation}\]</div>
<p>To correct these distortions, five distortion coefficients are needed:</p>
<div class="amsmath math notranslate nohighlight" id="equation-7fc6813a-6c18-4bb0-8497-8c1f94f9cc34">
<span class="eqno">(2.11)<a class="headerlink" href="#equation-7fc6813a-6c18-4bb0-8497-8c1f94f9cc34" title="Permalink to this equation">#</a></span>\[\begin{equation}
\text{Distortion coefficients} = (k_1, k_2, p_1, p_2, k_3)
\end{equation}\]</div>
<p>In addition to distortion coefficients, camera calibration requires knowledge of intrinsic and extrinsic parameters. <strong>Intrinsic parameters</strong> are specific to a camera and include focal length (<span class="math notranslate nohighlight">\(f_x\)</span>, <span class="math notranslate nohighlight">\(f_y\)</span>) and optical centers (<span class="math notranslate nohighlight">\(c_x\)</span>, <span class="math notranslate nohighlight">\(c_y\)</span>). These parameters contribute to the camera matrix, which is used to rectify lens distortions. The camera matrix, expressed as a 3x3 matrix, is defined as:</p>
<div class="amsmath math notranslate nohighlight" id="equation-cda8fff0-4d47-444b-aa47-76e04a6eed3f">
<span class="eqno">(2.12)<a class="headerlink" href="#equation-cda8fff0-4d47-444b-aa47-76e04a6eed3f" title="Permalink to this equation">#</a></span>\[\begin{equation}
\text{camera matrix} = \begin{bmatrix} f_x &amp; 0 &amp; c_x \\ 0 &amp; f_y &amp; c_y \\ 0 &amp; 0 &amp; 1 \end{bmatrix}
\end{equation}\]</div>
<p><strong>Extrinsic parameters</strong> correspond to rotation and translation vectors, mapping a 3D point’s coordinates to a coordinate system.</p>
<p>To perform camera calibration, sample images of a well-defined pattern (e.g., a chessboard) are required. By identifying known points in both the real world and the image, distortion coefficients can be computed. For accurate results, at least 10 test patterns are recommended.</p>
</div>
<div class="section" id="correcting-lens-distortion-with-cv2-undistort">
<h2><span class="section-number">2.6. </span>Correcting Lens Distortion with <code class="docutils literal notranslate"><span class="pre">cv2.undistort()</span></code><a class="headerlink" href="#correcting-lens-distortion-with-cv2-undistort" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">cv2.undistort()</span></code> function in the Python OpenCV library serves as a powerful tool for addressing lens distortion present in input images. Lens distortion is a common concern in photography, arising from the inherent curvature of camera lenses. This distortion can significantly impact image accuracy, making it particularly relevant in computer vision applications. The function provides a means to rectify lens-induced distortions, leveraging a specified camera calibration that includes both the camera matrix and distortion coefficients <span id="id11">[<a class="reference internal" href="References.html#id24" title="G. Bradski. The OpenCV Library. Dr. Dobb's Journal of Software Tools, 2000.">Bradski, 2000</a>, <a class="reference internal" href="References.html#id25" title="OpenCV Developers. Opencv documentation. https://docs.opencv.org/4.x/index.html, 2023. [Online; accessed 01-August-2023].">OpenCV Developers, 2023</a>]</span>.</p>
<p>Here’s a comprehensive explanation of the function’s parameters and its primary purpose:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">src</span></code>: This parameter corresponds to the input image you intend to undistort, typically containing distortions resulting from lens effects. It should be represented as a numpy array, serving as the image you wish to correct.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cameraMatrix</span></code>: The <code class="docutils literal notranslate"><span class="pre">cameraMatrix</span></code> parameter represents a 3x3 matrix, serving as the intrinsic matrix of the camera. It holds essential information about the camera’s focal length, principal point, and other vital calibration parameters. This matrix plays a crucial role in the undistortion process.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">distCoeffs</span></code>: The <code class="docutils literal notranslate"><span class="pre">distCoeffs</span></code> parameter encompasses distortion coefficients that succinctly describe the lens distortion effects. These coefficients are typically determined during camera calibration and are crucial for modeling both radial and tangential distortions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dst</span></code> (optional): The <code class="docutils literal notranslate"><span class="pre">dst</span></code> parameter serves as the output image container, where the undistorted result will be stored. If this parameter is not provided, the function creates a new image specifically to hold the undistorted version.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">newCameraMatrix</span></code> (optional): The <code class="docutils literal notranslate"><span class="pre">newCameraMatrix</span></code> parameter is an additional, optional parameter. It allows you to specify a new camera matrix for the undistorted image. This parameter gives you control over the output image’s aspect ratio or focal length, offering flexibility in customization.</p></li>
</ul>
<div class="section" id="id12">
<h3><span class="section-number">2.6.1. </span>Function Signature<a class="headerlink" href="#id12" title="Permalink to this headline">#</a></h3>
<p>Here’s the structure of the function signature:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cv2</span><span class="o">.</span><span class="n">undistort</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">cameraMatrix</span><span class="p">,</span> <span class="n">distCoeffs</span><span class="p">[,</span> <span class="n">dst</span><span class="p">[,</span> <span class="n">newCameraMatrix</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">dst</span>
</pre></div>
</div>
</div>
<div class="section" id="importance-in-computer-vision">
<h3><span class="section-number">2.6.2. </span>Importance in Computer Vision<a class="headerlink" href="#importance-in-computer-vision" title="Permalink to this headline">#</a></h3>
<p>Lens distortion correction plays a pivotal role in various computer vision tasks, such as object tracking, feature matching, and 3D reconstruction. By applying the <code class="docutils literal notranslate"><span class="pre">cv2.undistort()</span></code> function, you can obtain undistorted images that more accurately represent the real-world scene, significantly enhancing the reliability and accuracy of subsequent computer vision operations.</p>
<p>This function is a critical component of the camera calibration process, where the camera matrix and distortion coefficients are determined through calibration techniques. These parameters are then employed to eliminate distortion effects from captured images, resulting in improved precision in subsequent computer vision tasks.</p>
<p>For more comprehensive information and practical examples of using the <code class="docutils literal notranslate"><span class="pre">undistort</span></code> function, you can refer to the <a class="reference external" href="https://docs.opencv.org/2.4/modules/imgproc/doc/geometric_transformations.html#cv2.undistort">OpenCV documentation</a>. A solid understanding and effective utilization of lens distortion correction are essential skills for achieving high-quality results in computer vision applications that involve image analysis using cameras with distortion.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">skimage</span> <span class="kn">import</span> <span class="n">io</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Load the image from the given URL and convert it to RGB format</span>
<span class="n">Img</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;https://github.com/opencv/opencv/blob/fc1a15626226609babd128e043cf7c4e32f567ca/samples/data/left12.jpg?raw=true&#39;</span><span class="p">)</span>
<span class="n">Img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">Img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_GRAY2RGB</span><span class="p">)</span>

<span class="c1"># Create a subplot for displaying original and processed images</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>

<span class="c1"># Set the title for the overall figure</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Finding Corners&#39;</span><span class="p">,</span> <span class="n">weight</span> <span class="o">=</span> <span class="s1">&#39;bold&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>

<span class="c1"># Display the original image on the left subplot</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">Img</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Original Image: github.com/opencv&#39;</span><span class="p">,</span> <span class="n">weight</span> <span class="o">=</span> <span class="s1">&#39;bold&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

<span class="c1"># Termination criteria for corner refinement</span>
<span class="n">criteria</span> <span class="o">=</span> <span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">TERM_CRITERIA_EPS</span> <span class="o">+</span> <span class="n">cv2</span><span class="o">.</span><span class="n">TERM_CRITERIA_MAX_ITER</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">)</span>

<span class="c1"># Number of inside corners along x and y directions on the chessboard</span>
<span class="n">nx</span> <span class="o">=</span> <span class="mi">9</span>
<span class="n">ny</span> <span class="o">=</span> <span class="mi">6</span>

<span class="c1"># Convert the image to grayscale</span>
<span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">Img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>

<span class="c1"># Prepare object points in the chessboard pattern</span>
<span class="n">objp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nx</span><span class="o">*</span><span class="n">ny</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="n">objp</span><span class="p">[:,:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">nx</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="n">ny</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># Arrays to store object points and image points from the chessboard</span>
<span class="n">objpoints</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># 3D points in real world space</span>
<span class="n">imgpoints</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># 2D points in image plane</span>

<span class="c1"># Find the chessboard corners</span>
<span class="n">ret</span><span class="p">,</span> <span class="n">corners</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">findChessboardCorners</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="p">(</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>

<span class="c1"># If corners are found, refine and draw them</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">objpoints</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">objp</span><span class="p">)</span>
    
    <span class="c1"># Draw and display the corners on the image</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">drawChessboardCorners</span><span class="p">(</span><span class="n">Img</span><span class="p">,</span> <span class="p">(</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">),</span> <span class="n">corners</span><span class="p">,</span> <span class="n">ret</span><span class="p">)</span>
    <span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">Img</span><span class="p">)</span>
    
    <span class="c1"># Refine the corner positions</span>
    <span class="n">corners2</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cornerSubPix</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="n">corners</span><span class="p">,</span> <span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">criteria</span><span class="p">)</span>
    <span class="n">imgpoints</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">corners2</span><span class="p">)</span>

<span class="c1"># Set the title for the right subplot</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Finding Corners&#39;</span><span class="p">,</span> <span class="n">weight</span> <span class="o">=</span> <span class="s1">&#39;bold&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

<span class="c1"># Configure plot settings for both subplots</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
    <span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

<span class="c1"># Show the plots</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/72ff230d0a447141a86852c46f4afc2775a6b131b7e6c5c8dfca03fcee0d9423.png" src="_images/72ff230d0a447141a86852c46f4afc2775a6b131b7e6c5c8dfca03fcee0d9423.png" />
</div>
</div>
<p>This code retrieves an image from a URL, converts it to RGB format, and then attempts to find the corners of a chessboard pattern in the image. It displays the original image on the left subplot and, if the corners are found, it draws and displays the corners on the right subplot. The corner positions are also refined using the <code class="docutils literal notranslate"><span class="pre">cv2.cornerSubPix</span></code> function.</p>
<p>For the calibration process, the essential tool at our disposal is the <a class="reference external" href="https://docs.opencv.org/2.4/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#calibratecamera">cv2.calibrateCamera()</a> function. This function plays a pivotal role in camera calibration, providing a comprehensive set of results, including the camera matrix, distortion coefficients, as well as rotation and translation vectors, among other critical information. The function serves as the cornerstone for calibrating a camera system, enabling accurate and reliable image analysis in computer vision applications <span id="id13">[<a class="reference internal" href="References.html#id24" title="G. Bradski. The OpenCV Library. Dr. Dobb's Journal of Software Tools, 2000.">Bradski, 2000</a>, <a class="reference internal" href="References.html#id25" title="OpenCV Developers. Opencv documentation. https://docs.opencv.org/4.x/index.html, 2023. [Online; accessed 01-August-2023].">OpenCV Developers, 2023</a>]</span>.</p>
<p>Through the <code class="docutils literal notranslate"><span class="pre">cv2.calibrateCamera()</span></code> function, we gain access to the following essential parameters:</p>
<ul class="simple">
<li><p><strong>Camera Matrix</strong>: The camera matrix, which is crucial for undistorting images and contains critical information about the camera’s intrinsic properties, such as focal length, principal point, and more.</p></li>
<li><p><strong>Distortion Coefficients</strong>: These coefficients capture the distortion effects induced by the camera’s lens, allowing us to model and correct for both radial and tangential distortions.</p></li>
<li><p><strong>Rotation and Translation Vectors</strong>: These vectors are integral in translating 3D coordinates to a camera’s coordinate system. They play a fundamental role in tasks involving 3D reconstruction and object tracking.</p></li>
</ul>
<p>In addition to these core parameters, the <code class="docutils literal notranslate"><span class="pre">cv2.calibrateCamera()</span></code> function may provide other valuable information that is pertinent to the camera’s geometric calibration and 3D reconstruction capabilities. The precise determination of these parameters significantly enhances the accuracy and reliability of subsequent computer vision operations.</p>
<p>This function empowers us to calibrate the camera system based on a set of carefully selected calibration images and corresponding known 3D points. By leveraging this calibration data, we can extract the camera’s intrinsic and extrinsic properties, paving the way for more precise and consistent image analysis.</p>
<p>For in-depth guidance on how to utilize the <code class="docutils literal notranslate"><span class="pre">cv2.calibrateCamera()</span></code> function and to better understand the process of camera calibration, you can refer to the <a class="reference external" href="https://docs.opencv.org/2.4/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#calibratecamera">OpenCV documentation</a>. Mastering the art of camera calibration is essential for achieving accurate and reliable results in computer vision applications, particularly those involving 3D reconstruction and precise spatial analysis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">skimage</span> <span class="kn">import</span> <span class="n">io</span>

<span class="c1"># Calibrate the camera using object points and image points</span>
<span class="c1"># &#39;objpoints&#39; and &#39;imgpoints&#39; are provided</span>
<span class="n">ret</span><span class="p">,</span> <span class="n">mtx</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">rvecs</span><span class="p">,</span> <span class="n">tvecs</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">calibrateCamera</span><span class="p">(</span><span class="n">objpoints</span><span class="p">,</span> <span class="n">imgpoints</span><span class="p">,</span> <span class="n">gray</span><span class="o">.</span><span class="n">shape</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="c1"># Load the image from the given URL and convert it to RGB color</span>
<span class="n">Img</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;https://github.com/opencv/opencv/blob/fc1a15626226609babd128e043cf7c4e32f567ca/samples/data/left12.jpg?raw=true&#39;</span><span class="p">)</span>
<span class="n">Img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">Img</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_GRAY2RGB</span><span class="p">)</span>

<span class="c1"># Get the dimensions of the image</span>
<span class="n">h</span><span class="p">,</span> <span class="n">w</span> <span class="o">=</span> <span class="n">Img</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>

<span class="c1"># Get the optimal new camera matrix and the region of interest (ROI) for undistortion</span>
<span class="n">newcameramtx</span><span class="p">,</span> <span class="n">roi</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">getOptimalNewCameraMatrix</span><span class="p">(</span><span class="n">mtx</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">))</span>

<span class="c1"># Undistort the image using the computed transformation</span>
<span class="n">mapx</span><span class="p">,</span> <span class="n">mapy</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">initUndistortRectifyMap</span><span class="p">(</span><span class="n">mtx</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">newcameramtx</span><span class="p">,</span> <span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">),</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">dst</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">remap</span><span class="p">(</span><span class="n">Img</span><span class="p">,</span> <span class="n">mapx</span><span class="p">,</span> <span class="n">mapy</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">INTER_LINEAR</span><span class="p">)</span>

<span class="c1"># Crop the image based on the computed ROI</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">roi</span>
<span class="n">Out</span> <span class="o">=</span> <span class="n">dst</span><span class="p">[</span><span class="n">y</span><span class="p">:</span><span class="n">y</span><span class="o">+</span><span class="n">h</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="o">+</span><span class="n">w</span><span class="p">]</span>

<span class="c1"># Display the undistorted and cropped image using matplotlib</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">Out</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Set the aspect ratio to 1 to avoid distortion</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>  <span class="c1"># Turn off axis labels and ticks</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/fce807dcdcb62eeb34b2c8aa340d737ad552af3bd2001b44ed247e02a32b5e05.png" src="_images/fce807dcdcb62eeb34b2c8aa340d737ad552af3bd2001b44ed247e02a32b5e05.png" />
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="CV_C1.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">1. </span>Getting Started with OpenCV</p>
      </div>
    </a>
    <a class="right-next"
       href="CV_C3.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">3. </span>Drawing Functions</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#affine-transformations">2.1. Affine Transformations</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-derive-an-affine-transformation">2.1.1. How to Derive an Affine Transformation?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getaffinetransform">2.1.2. getAffineTransform</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#image-wrap">2.1.3. Image Wrap</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#resize">2.2. Resize</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#resizing-images-with-opencv">2.3. Resizing Images with OpenCV</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#warp-perspective">2.4. Warp Perspective</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#perspective-transformation">2.4.1. Perspective Transformation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#parameters">2.4.2. Parameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#function-signature">2.4.3. Function Signature</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#usage-and-importance">2.4.4. Usage and Importance</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#camera-calibration">2.5. Camera Calibration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#correcting-lens-distortion-with-cv2-undistort">2.6. Correcting Lens Distortion with <code class="docutils literal notranslate"><span class="pre">cv2.undistort()</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">2.6.1. Function Signature</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#importance-in-computer-vision">2.6.2. Importance in Computer Vision</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Hatef Dastour
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>